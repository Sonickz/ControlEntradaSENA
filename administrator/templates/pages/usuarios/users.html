{% extends 'layouts/admin_base.html' %}
{% load static %}

{% block title %} {{title}} {% endblock %}

{% block card_title %} {{title}} {% endblock %}
{% block card_register_btn %} Registrar {{title}} {% endblock %}


{% block card_table %}

<div class="btn-change-table">
  {% for rol in roles %}
    <button type="button" class="btn btn-green2 users {% if rol.idrol == 2 %}btn-green2-active{% endif %}" data-table="{{rol.idrol}}">{{rol}}</button>
  {% endfor %}
</div>

{% for rol, data in users.items %}
<div class="table-container {% if forloop.counter != 2 %}d-none{% endif %}">
  <div class="table-scroll">
    <table class="table table-striped" data-table="{{forloop.counter}}">
      <thead>
        <tr>
          <th scope="col">Id</th>
          <th scope="col">Nombres</th>
          <th scope="col">Apellidos</th>
          <th scope="col">Rol</th>
          {% if rol == "aprendiz" %}
            <th scope="col">Ficha</th>
          {% endif %}
          <th scope="col">Documento</th>
          {% if rol != "visitante" %}
            <th scope="col">Centro</th>
          {% endif %}
          <th scope="col">Telefono</th>
          <th scope="col">Vehiculos y Dispositivos</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody class="tbody">
        {% for user in data.model %}      
        <tr>
          <th scope="row">{{user.idusuario}}</th>
          <td>{{user.nombres}}</td>
          <td>{{user.apellidos}}</td>
          <td class="rol" data-rol="{{user.rol.idrol}}">{{user.rol}}</td>
          <td class="ficha">{{user.ficha|default:""}}</td>
          <td>{{user.tipodocumento}} {{user.documento}}</td>
          <td class="centro">{{user.centro|default:""}}</td>
          <td>{{user.telefono}}</td>
          <td class="button-col">
            {% include 'layouts/components/ButtonModal.html' with class="elements" target="userElementsModal" data1="data-user" value1=user.idusuario %}
          </td>
          <td class="actions">
            <!-- Dropdows de acciones-->
            {% with url="edituser/"|add:user.idusuario %}
              {% include 'layouts/components/Dropdown.html' with url=url %}
            {% endwith %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% include 'layouts/components/Pagination.html' with pagination=data.model name=data.name %} 
</div>
{% endfor %}

{% endblock %}

{% block Modal %}
  {% include 'layouts/components/ElementsModal.html' with id="userElementsModal" title="Vehiculos y dispositivos" cardName1="Vehiculos" cardClass1="vehicles" card2="true" cardName2="Dispositivos" cardClass2="devices" %}
{% endblock %}

{% block card_register %}

<header class="card-header">
  <h1 class="card-title">Rol</h1>
  <!-- Btn atras -->
  {% include 'layouts/components/BackButton.html' %}
</header>
<div class="card-body">
  {% include 'layouts/components/SelectRol.html' with rol1="/admin/users/registeruser/1" rol2="/admin/users/registeruser/2" rol3="/admin/users/registeruser/3" rol4="/admin/users/registeruser/4" %}
</div>

{% endblock %}




  
  