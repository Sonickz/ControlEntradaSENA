{% extends 'layouts/admin_base_access.html' %}
{% load static %}

{% block title %} {{title}} {% endblock %}

{% block card_title %} {{title}} {% endblock %}

{% block card_table %}

<div class="btn-change-table">
  <button type="button" class="btn btn-green2 btn-green2-active" data-table="1">Ingresos activos</button>    
  <button type="button" class="btn btn-green2" data-table="2">Ingresos y salidas</button>    
</div>

<div class="table-container">
  <div class="table-scroll">
    <table class="table table-striped" data-table="1">
      <thead>
        <tr>
          <th scope="col">Id</th> 
          <th scope="col">Fecha</th>
          <th scope="col">Usuario</th>
          <th scope="col">Rol</th>
          <th scope="col">Vehiculo</th>
          <th scope="col">Dispositivo</th>
          <th scope="col">Hora ingreso</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody class="tbody">
        {% for enter in access %}
        <tr>
          <th scope="row">{{enter.idingreso}}</th>
          <td>{{enter.fecha}}</td>
          <td>{{enter.usuario}}</td>
          <td>{{enter.usuario.rol}}</td>
          <td>{{enter.dispositivo|default:"Ninguno"}}</td>
          <td>{{enter.vehiculo|default:"Ninguno"}}</td>      
          <td>{{enter.horaingreso}}</td>  
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% include 'layouts/components/Pagination.html' with pagination=access name="access"%}
</div>

<div class="table-container d-none">
  <div class="table-scroll">
    <table class="table table-striped" data-table="2">
      <thead>
        <tr>
          <th scope="col">Id</th> 
          <th scope="col">Fecha</th>
          <th scope="col">IdIngreso</th>
          <th scope="col">Usuario</th>
          <th scope="col">Rol</th>
          <th scope="col">Vehiculo</th>
          <th scope="col">Dispositivos Ingreso</th>
          <th scope="col">Dispositivos Salida</th>
          <th scope="col">Hora ingreso</th>
          <th scope="col">Hora salida</th>
        </tr>
      </thead>
      <tbody class="tbody">
        {% for exit in exits %}
        <tr>
          <th scope="row">{{exit.idsalida}}</th>
          <td>{{exit.fecha}}</td>
          <td>{{exit.ingreso.idingreso}}</td>
          <td>{{exit.ingreso.usuario}}</td>
          <td>{{exit.ingreso.usuario.rol}}</td>
          <td>{{exit.vehiculo|default:"Ninguno"}}</td>  
          <td>
            {% for ingreso in exit.ingreso.dispositivos_ingreso %}
              {{ingreso.dispositivo}}
            {% endfor %}
          </td>    
          <td>
            {% if exit.dispositivos_salida %} 
              {% for exit in exit.dispositivos_salida %}
                {{exit.dispositivo}}{% if not forloop.last %}, {% endif %}
              {% endfor %}
            {% endif %}
          </td>
          <td>{{exit.ingreso.horaingreso}}</td>  
          <td>{{exit.horasalida}}</td>  
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% include 'layouts/components/Pagination.html' with pagination=exits name="exits"%}
</div>



{% endblock %}
